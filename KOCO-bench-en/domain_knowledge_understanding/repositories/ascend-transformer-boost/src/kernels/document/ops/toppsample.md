# Toppsample
## 参数说明
- **OpName**：ToppsampleOperation
- **PARAM**
**Param Type**：OpParam::Toppsample
 
| 名称  | 类型  | 描述 |
| ------------ | ------------ | ------------ |
|randSeed|uint32_t||
 
- **In/Out Tensor**
 
| 名称            | 类型  | dims  | dtype            |
|---------------| ------------ | ------------ |------------------|
| Cumsumed_prob |In	|[batch, vocal_size]| float16/bfloat16 |
| topp          |In|[batch,1]| 	float16/bfloat16|
| idx           |Out	|[batch,1]| 	int32_t         |
| select_range  |Out	|[batch]| 	int32_t         |	
 
## 功能描述
- 算子功能：后处理算子topk,topp融合
 
## 示例
```
输入:
Cumsumed_prob = [[0.01323, 0.02611, 0.05786, 0.0843, 0.1796,   0.261, 0.2908, 0.2957,
                    0.352,  0.3635,  0.4214, 0.4768,  0.523,  0.6636,  0.788,   0.82,
                   0.8306,   0.838,  0.9097,    1.],
                [  0.0515,  0.0575,  0.0776,  0.258,  0.318,  0.3337, 0.3577, 0.3916,
                   0.5054,  0.6436,  0.7163, 0.7285, 0.7437,   0.773, 0.7905, 0.8267,
                   0.8706,  0.9023,   0.956,    1.],
                [ 0.01379, 0.04752, 0.05896, 0.0751, 0.1008,  0.2534,  0.257, 0.2603,
                   0.2678,  0.3044,  0.3484, 0.3667, 0.3787,  0.3892, 0.4153, 0.4258,
                   0.4355,  0.4675,  0.5376,    1.],
                [0.005302, 0.01244,  0.1638, 0.1779, 0.1918,  0.2534,  0.328, 0.4167,
                   0.4224,   0.742,  0.7573, 0.7915, 0.7964,  0.8105, 0.8257,  0.841,
                    0.849,   0.924,  0.9453,    1.],
                [ 0.02544, 0.08093,   0.093,  0.121, 0.1858,  0.2045, 0.2834, 0.3235,
                   0.3452,  0.6245,   0.629, 0.6553,  0.665,   0.676, 0.7046, 0.7617,
                   0.9062,  0.9136,   0.953,    1.],
                [0.003582, 0.01254, 0.05145, 0.1161, 0.1787,  0.2314,    0.3,  0.377,
                    0.454,  0.4749,  0.5815,  0.601,   0.64,  0.6445,   0.69, 0.7373,
                    0.865,  0.9346,  0.9536,    1.],
                [0.014694, 0.03192,  0.2191, 0.2374, 0.2683,  0.3562,  0.425, 0.5347,
                   0.5464,   0.564,   0.576, 0.6245, 0.6753,  0.7188, 0.9116,  0.921,
                   0.9463,   0.977,   0.992,    1.],
                [ 0.04175,  0.0582, 0.09204, 0.1511, 0.1868,  0.2389, 0.2979,  0.446,
                    0.508,  0.5757,   0.614,  0.655,  0.711,   0.732, 0.7393, 0.7915,
                   0.8145,   0.878,   0.932,    1.],
                [  0.1162,  0.1326,  0.1924,  0.232,  0.352,  0.3787, 0.4734,  0.555,
                   0.6157,  0.6704,  0.7095,  0.773,  0.805,  0.8203, 0.8765, 0.8877,
                   0.9287,    0.96,   0.969,    1.],
                [  0.1257,  0.1744,  0.3801, 0.4734,  0.499,   0.507,  0.532,  0.559,
                   0.5815,  0.5913,   0.609, 0.6143, 0.6284,  0.6494, 0.6924, 0.7524,
                    0.785,   0.939,  0.9824,    1.]]
 
topp = [[0.0879],
        [0.1577],
        [0.4902],
        [0.9048],
        [0.8818],
        [0.9219],
        [0.6270],
        [0.9702],
        [0.3657],
        [0.0679]],
 输出:
 idx = [[ 3],
        [ 2],
        [10],
        [ 9],
        [14],
        [ 6],
        [ 2],
        [ 8],
        [ 1],
        [ 0]],
        
 select_range = [[ 4],
                 [ 3],
                 [18],
                 [17],
                 [16],
                 [17],
                 [12],
                 [19],
                 [ 5],
                 [ 0]],
```
 
## 支持芯片型号
 
|芯片名称|约束 | 
| ------------ | ------------ | 
|  ascend910b|无|
|  ascend310p|无|