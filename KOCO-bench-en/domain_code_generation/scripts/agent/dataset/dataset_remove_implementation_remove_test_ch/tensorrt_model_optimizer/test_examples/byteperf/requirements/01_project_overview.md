# ByteMLPerf 基准测试 Pipeline

## 1. 项目概述

ByteMLPerf 是 AI 加速器基准测试套件，专注于从实际生产角度评估 AI 加速器的性能。相比传统 MLPerf，ByteMLPerf 具有以下特点：模型和运行环境更贴近真实业务场景；对于 ASIC 硬件评估，除了性能和精度外，还评估编译器易用性和覆盖率等指标。

## 2. 工作流程

ByteMLPerf 的工作流程分为三个主要阶段：

### 模型准备与编译
- 加载模型配置和数据集
- 在目标硬件上编译模型，生成可执行代码
- 配置测试参数（批次大小、迭代次数等）

### 性能测试执行
- **推理测试**: 在不同批次大小下测量延迟和吞吐量
- **微观测试**: 测试基础计算操作和通信操作的性能
- **训练测试**: 评估分布式训练的性能和扩展性

### 结果分析与报告
- 收集性能指标数据
- 进行精度验证（如需要）
- 生成性能报告和对比分析

## 3. 基准测试类别

### 推理性能测试 (Inference)
- **通用性能测试 (General Perf)**: 使用常见模型评估加速器推理能力
- **大语言模型性能测试 (LLM Perf)**: 专门评估加速器处理大语言模型的能力
- **测试指标**: 延迟、吞吐量、精度、内存使用

### 微观性能测试 (Micro)
- **计算操作**: Gemm, Softmax, Conv2D, BatchNorm, LayerNorm 等基础计算操作
- **通信操作**: AllReduce, AllGather, Broadcast, ReduceScatter 等分布式通信操作
- **测试指标**: 延迟、内存带宽、计算能力、通信带宽、算法效率

### 训练性能测试 (Training)
- **分布式训练**: 基于 Megatron-LM 的大规模模型训练性能评估
- **测试指标**: 训练吞吐量、扩展性、内存效率、通信效率

## 4. 硬件评估维度

- **性能指标**: 计算能力、内存带宽、延迟、吞吐量
- **精度指标**: 模型准确率、数值精度、收敛性
- **易用性指标**: 编译器覆盖率、部署便利性、开发效率